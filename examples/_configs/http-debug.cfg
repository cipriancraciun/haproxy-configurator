
frontend 'http'

    #---- Protocol
    mode http
    enabled

    #---- Bind
    bind 'ipv4@0.0.0.0:80'

    #---- HTTP Request Rules
    http-request set-header "X-HA-HTTP-Action" "%[var(txn.logging_http_action)]" if TRUE
    http-request set-header "X-HA-Timestamp" "%[date(),http_date()]" if TRUE
    http-request add-header "X-HA-Frontend" "%f" if TRUE
    http-request add-header "X-HA-Backend" "%b" if TRUE

    #---- HTTP Response Rules
    http-response set-header "X-HA-HTTP-Action" "%[var(txn.logging_http_action)]" if TRUE
    http-response set-header "X-HA-Timestamp" "%[date(),http_date()]" if TRUE
    http-response add-header "X-HA-Frontend" "%f" if TRUE
    http-response add-header "X-HA-Backend" "%b" if TRUE

    #---- Routes
    use_backend http-backend


backend 'http-backend'

    #---- Protocol
    mode http
    enabled

    #---- Servers
    server 'default' 'ipv4@127.0.0.1:8080'

